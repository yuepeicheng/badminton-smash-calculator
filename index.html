<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Smash Speed Calculator — Math IA</title>
  <link rel="stylesheet" href="style.css" />

    <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-264PJ31JW2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-264PJ31JW2');
  </script>
</head>
<body>
  <header class="wrap header">
    <div>
      <h1>Smash Speed Calculator</h1>
      <p class="subtitle">Calculate your badminton smash speed (v₀) from your measured distance, time, and angle. -By Peicheng Yue </p>
    </div>

    <nav class="nav">
      <a href="#calculator" class="nav-link">Calculator</a>
      <a href="#video" class="nav-link">Video Analysis</a>
      <a href="#court" class="nav-link">Court Dimensions</a>
      <a href="#how" class="nav-link">How it works</a>
      <a href="#method" class="nav-link">Methodology</a>
    </nav>
  </header>

  <main class="wrap grid-main">

    <!-- CALCULATOR -->
    <section id="calculator" class="panel">
      <h2>Calculator</h2>

      <p class="hint">All calculations happen locally in your browser. Enter your calculated values (defaults provided).</p>

      <div class="form-grid">
        <label>
          Distance x(t) &nbsp;<span class="muted">(meters)</span>
          <input id="inputDistance" type="number" step="0.01" value="9.50" />
        </label>

        <label>
          Time t &nbsp;<span class="muted">(seconds)</span>
          <input id="inputTime" type="number" step="0.001" value="0.5" />
        </label>

        <label>
          Angle θ &nbsp;<span class="muted">(degrees)</span>
          <input id="inputAngle" type="number" step="0.1" value="8" />
        </label>

        <label>
          Drag constant kₓ &nbsp;<span class="muted">(1 / m — We suggest using the default value, please read the methodology section for more information regarding this variable)</span>
          <input id="inputKx" type="number" step="0.0001" value="0.2" />
        </label>
      </div>

      <div class="row">
        <button id="btnCalc">Calculate Smash Speed (v₀) !</button>
        <button id="btnClear" class="ghost">Reset</button>
      </div>

      <div id="resultCard" class="result-card hidden">
        <div class="result-row"><span>v₀ (m/s):</span><span id="outMps">—</span></div>
        <div class="result-row"><span>v₀ (km/h):</span><span id="outKmh">—</span></div>
        <div class="result-row"><span>v₀ (mph):</span><span id="outMph">—</span></div>
        <div class="small muted" id="outNotes"></div>
      </div>

      <div id="error" class="error hidden" role="alert"></div>
    </section>

    <!-- VIDEO ANALYSIS SECTION -->
    <section id="video" class="panel full-width">
      <h2>Video Time Measurement</h2>
      <p class="hint">Upload a video of your smash and mark the start and end points to measure the exact time interval.</p>

      <div class="video-upload">
        <input type="file" id="videoUpload" accept="video/*" />
        <label for="videoUpload" class="upload-label">Choose Video File</label>
      </div>

      <div id="videoContainer" class="video-container hidden">
        <video id="videoPlayer" controls></video>

        <div class="video-controls">
          <div class="time-markers">
            <div class="marker-group">
              <label>Start Time:</label>
              <div class="marker-display">
                <span id="startTimeDisplay">--:--</span>
                <button id="btnSetStart" class="small-btn">Set Start Point</button>
              </div>
            </div>

            <div class="marker-group">
              <label>End Time:</label>
              <div class="marker-display">
                <span id="endTimeDisplay">--:--</span>
                <button id="btnSetEnd" class="small-btn">Set End Point</button>
              </div>
            </div>
          </div>

          <div id="timeDiffResult" class="time-result hidden">
            <div class="result-highlight">
              <strong>Time Interval:</strong> <span id="timeDiffValue">0.000</span> seconds
            </div>
            <button id="btnUseTime" class="accent-btn">Use This Time in Calculator</button>
          </div>
        </div>
      </div>
    </section>

    <!-- COURT DIMENSIONS SECTION -->
    <section id="court" class="panel full-width">
      <h2>Badminton Court Dimensions Reference</h2>
      <p class="hint">Use these standard measurements to help determine the distance your shuttle traveled.</p>

      <div class="court-info-grid">
        <div class="court-diagram">
          <div class="court-visual">
            <div class="court-outline">
              <div class="court-label top">Net</div>
              <div class="court-measurement horiz">6.10 m (20 ft)</div>
              <div class="court-measurement vert">13.40 m (44 ft)</div>
              <div class="service-line">Service Line</div>
              <div class="court-label bottom">Baseline</div>
            </div>
          </div>
        </div>

        <div class="court-measurements">
          <h3>Key Measurements</h3>
          <div class="measurement-list">
            <div class="measurement-item">
              <span class="measure-label">Court Length (Singles & Doubles):</span>
              <span class="measure-value">13.40 m (44 ft)</span>
            </div>
            <div class="measurement-item">
              <span class="measure-label">Court Width (Doubles):</span>
              <span class="measure-value">6.10 m (20 ft)</span>
            </div>
            <div class="measurement-item">
              <span class="measure-label">Court Width (Singles):</span>
              <span class="measure-value">5.18 m (17 ft)</span>
            </div>
            <div class="measurement-item">
              <span class="measure-label">Service Line to Net:</span>
              <span class="measure-value">1.98 m (6.5 ft)</span>
            </div>
            <div class="measurement-item">
              <span class="measure-label">Service Line to Baseline:</span>
              <span class="measure-value">4.72 m (15.5 ft)</span>
            </div>
            <div class="measurement-item">
              <span class="measure-label">Net Height (Center):</span>
              <span class="measure-value">1.524 m (5 ft)</span>
            </div>
            <div class="measurement-item">
              <span class="measure-label">Net Height (Edges):</span>
              <span class="measure-value">1.55 m (5 ft 1 in)</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- HOW IT WORKS + VARIABLE DETAIL -->
    <aside id="how" class="panel">
      <h2>How it works (math)</h2>

      <div class="card-light">
        <!-- Render the formula plainly (image earlier) -->
        <div class="formula">
          <code>v₀ = (e^(kₓ · x(t)) − 1) / (kₓ · t · cos θ)</code>
        </div>

        <details open>
          <summary>Short summary</summary>
          <p>
            The formula comes from an exponential model of motion with a parameter <strong>kₓ</strong>. For a measured
            distance <em>x(t)</em> in a measured time <em>t</em> and launch angle θ, we solve for the initial speed v₀ as shown above.
          </p>
        </details>

        <label class="var-explain-label">Explain a variable:
          <select id="varSelect">
            <option value="">(choose a variable)</option>
            <option value="x">x(t) — distance</option>
            <option value="t">t — time</option>
            <option value="theta">θ — angle</option>
            <option value="kx">kₓ — model constant</option>
          </select>
        </label>
        <div id="varExplain" class="muted small">Select a variable to see a short explanation.</div>
      </div>

      <details id="mathDetails">
        <summary>Step-by-step math</summary>
        <ol>
          <li>Plug in your measured <code>x(t)</code>, <code>t</code>, and angle θ (converted to radians in the code).</li>
          <li>Compute <code>numerator = e^(kₓ * x) - 1</code>.</li>
          <li>Compute <code>denominator = kₓ * t * cos(θ)</code>. If denominator ≈ 0 the formula is invalid — check t and θ.</li>
          <li>Then <code>v₀ = numerator / denominator</code>. Units: m/s (converted below).</li>
          <li>We include simple UI validation and small notes about typical numeric ranges.</li>
        </ol>
      </details>
    </aside>

    <!-- METHODOLOGY -->
    <section id="method" class="panel">
      <h2>Methodology, Aim & Notes</h2>

      <details>
        <summary>Project aim</summary>
        <p>
          xxx
        </p>
      </details>

      <details>
        <summary>Methodology (detailed)</summary>
        <p>
          xxx
        </p>
        <ul>
          <li>Data collection (how you measured distances and times).</li>
          <li>Choice and justification of <code>kₓ</code> (drag/decay constant) and how you validated it.</li>
          <li>Limitations — camera parallax, angle measurement error, shuttle spin, measurement noise.</li>
          <li>Validation: how you compared results (e.g., known speed ranges, repeated measurements).</li>
        </ul>
      </details>

    </section>

  </main>

  <footer class="wrap footer">
    <div class="small muted">© Peicheng Yue — 2025</div>
  </footer>

  <script src="app.js"></script>
</body>
</html>
